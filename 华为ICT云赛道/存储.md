# 存储

存储产品

- 全闪存存储：OceanStor Dorado XXXX V6   OceanStor XXXX F V5
  - 仅支持SSD盘（SAS SSD/NVMe SSD）
- 混合闪存存储：OceanStor XXXX V5/V3
  - 即支持HHD 也支持SSD（SSD SAS NL-SAS）
- 海量存储
- 超融合

U高度

1U=4.445cm

上架参数

## 什么是存储？

提供数据空间，保护数据

### 存储设备

- 磁带
  - 银行，法院等使用磁带作为存储介质（离线存储，断电保存）
- 磁盘
  - 固态硬盘（SSD）：cell充放电记录数据
  - 机械硬盘（HDD）：使用磁性粒子--S N记录数据，机械硬件寻址CHS LBA
  - SATA接口
  - M.2接口
- U盘
- 网盘
- 光盘

#### 机械硬盘

工作在无尘的环境，0号磁道在最外圈，关机时磁头在最里边

##### 接口

IDE DATA SCSI SAS FC NL-SAS（SAS接口，SATA盘体）

磁头找到数据后，盘片的高速旋转，读取数据

所有盘面的0号磁道存满后，开始在1号磁道开始存储。

##### 工作原理

- 盘片
- 磁头臂
- 读/写磁头
- 主轴组件
- 接口
- 控制电路

##### 影响硬盘性能的因素

- 转速：影响硬盘连续IO时通途量性能的首要因素
- 寻道速度：影响硬盘随机IO性能的首要要素
- 单碟容量：影响硬盘性能的一个间接因素
- 接口速度：影响硬盘性能的一个最不重要的因素

##### 硬盘的IOPS和传输带宽

- IOPS（Input/Output PerhapsSecod）

​	指每秒的输入输出量（或读写次数），是衡量硬盘性能的主要指标之一。

​	IPOS的计算：有寻道时间、旋转延迟和数据传输时间三部分组成

​	IOTime = 寻道时间 + 60s/转速/2 + IOChunkSize/传输速度

​	IOPS = 1000ms/IOTime

- 传输带宽（Throughput吞吐量）

  指单位时间内成功传输的数据量，及传输数据流的速度。

  传输带宽 = 文件大小/传输时间

#### 固态硬盘

##### SSD主要有控制单元和存储单元组成。

- 控制单元：SSD控制器，主机接口，DRAM等
- 存储单元：NAND FLASH颗粒。

##### 特点：

- 使用flash技术存储，数据传输速度比HHD快
- 内部没有机械结构，因此耗电量更小、散热小、噪音小
- SSD盘使用寿命受擦写次数影响

##### SSD主要类型：

- SLC（Single Level Cell）：每个单元存放1bit的数据，单层式存储单元，可擦写次数多。
- MLC（Multi Level Cell）：每个单元存放2bit的数据，多层式存储单元
- TLC（Triple Level Cell）：每个单元存放3bit的数据，三层式存储单元
- QLC：每个单元存放4bit的数据，多层式存储单元

##### 固态硬盘的磨损

- 性能影响最大的是可擦写次数。

## 存储的发展历程

## 存储设备管理软件

Devicemanager

### 存储设备登录

GUI/CLI

- GUI登录

  浏览器打开`https://管理IP:8088`

  默认用户名：admin

  密码：Admin@storage

### 存储设备接口

管理口，维护口，串口

管理口默认IP地址：192.168.128.101/102（两个管理口），用户可以修改

维护口默认IP地址：172.31.128.101/102，用户不可以修改

串口（设置波特率：115200）

### 存储设备组成

控制框+硬盘框

### 存储产品分类

- 盘控一体（入门级终端存储产品）：控制框里面可以安插硬盘
- 盘控分离（高端存储产品）：控制框里不可以安插硬盘

## 存储资源调优技术与应用

### SmartThin

概述
- 传统存储系统部署方式存在下面一-些问题:
    - 存储空间扩容时影响，甚至中断业务系统
    - 存储空间利用率不均衡
    - 存储效能比较低
- SmartThin
    - 使用过程中采用"按需分配”的存储空间分配策略,提高存储资源使用效率，更大限度满足业务的实际要求。

### SmartThin读操作

1. Thin LUN连接到主机的请求
2. 查询Thin LUN与Pool的映射表
3. 查询到Pool中分配该空间。返回全0给主机

1. Thin LUN连接到主机的请求
2. 查询Thin LUN与Pool的映射表
3. 查询Pool已近分配空间，将Pool中相对应曲云的读数据返回给主机

### SmartTier

#### 存储层层级划分

同一存储池中，存储层是相同性能的存储介质集合。每个存储层分别使用相同的硬盘类型和RAID策略。

- 高性能层：SSD硬盘
  - 高IPOS；任务响应式时间短，每单位存储容量成本很高
  - 适合随机读取存储请求密度高的业务负载
- 性能层：SAS硬盘
  - 大量业务负载下具有高带宽；任务响应时间剧中；没有倍缓存的数据，写比读慢。
  - 适合存储请求密度始终的业务负载。
- 容量层：NL-SAS硬盘
  - 低IOPS；任务响应时间长；每单位存储请求成本很高
  - 适合存储请求密度低的业务负载。

#### 实现SmartTier的三个阶段

1. I/O监控
2. 数据排布分析
3. 数据迁移

