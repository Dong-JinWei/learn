# 第零章 计算机概论

## 0.1 电脑：辅助人脑的好工具

所谓的电脑就是一种计算机，而计算机其实是：“**接受使用者输入指令与数据，经由中央处理器的数学与逻辑单元运算处理后， 以产生或储存成有用的信息**”。

### 0.1.1 计算机硬件的五大单元

输入单元、输出单元、控制单元、逻辑单元和内存。

从外观来分析台式机可以将他分为三部分，分别是：

1. 输入单元：键盘、鼠标、读卡器、扫描仪、手写板、触摸屏等
2. 主机部分：主板、cpu、内存等
3. 输出单元：显示器、打印机等

整部主机的重点在于中央处理器 （Central Processing Unit, CPU）  
CPU 内又可分为两个主要的单元，分别是：算数逻辑单元与控制单元。  
其中算数逻辑单元主要负责程序运算与逻辑判断  
控制单元则主要在协调各周边元件与各单元间的工作。

CPU都取的数据都是从内存中来的，内存中的数据是输入单元进来的，CPU处理完数据后又将数据写回内存中，最后数据从内存中传输到输出单元。

### 0.1.2 一切设计的起点：CPU的架构

CPU内部包含一下微指令，这些指令集的设计主要被分为两种设计理念，分别是**精简指令集（RISC）与复杂指令集（CISC） 系统。**

**精简指令集（Reduced Instruction Set Computer, RISC）：**
> 这种 CPU 的设计中，微指令集较为精简，每个指令的执行时间都很短，完成的动作也很单纯，指令的执行性能较佳； 但是若要做复杂的事情，就要由多个指令来完成。常见的 RISC 微指令集 CPU 主要例如甲骨文 （Oracle） 公司的 SPARC 系列、 IBM 公司的 Power Architecture （包括 PowerPC） 系列、与安谋公司 （ARM Holdings） 的 ARM CPU 系列等。
>
> 在应用方面，SPARC CPU 的电脑常用于学术领域的大型工作站中，包括银行金融体系的主要服务器也都有这类的电脑架构； 至于PowerPC架构的应用上，例如索尼（Sony）公司出产的Play Station 3（PS3）就是使用PowerPC架构的Cell处理器； 那安谋的 ARM 呢？你常使用的各厂牌手机、PDA、导航系统、网络设备（交换器、路由器等）等，几乎都是使用 ARM 架构的 CPU 喔！ 老实说，目前世界上使用范围最广的 CPU 可能就是 ARM 这种架构的呢！

**复杂指令集（Complex Instruction Set Computer, CISC）:**
> 与RISC不同的，CISC在微指令集的每个小指令可以执行一些较低阶的硬件操作，指令数目多而且复杂， 每条指令的长度并不相同。因为指令执行较为复杂所以每条指令花费的时间较长， 但每条个别指令可以处理的工作较为丰富。常见的CISC微指令集CPU主要有AMD、Intel、VIA等的x86架构的CPU。
>
> 由于AMD、Intel、VIA所开发出来的x86架构CPU被大量使用于个人电脑（Personal computer）用途上面， 因此，个人电脑常被称为x86架构的电脑！那为何称为x86架构呢？ 这是因为最早的那颗Intel发展出来的CPU代号称为8086，后来依此架构又开发出80286, 80386...， 因此这种架构的CPU就被称为x86架构了。
>
>在2003年以前由Intel所开发的x86架构CPU由8位升级到16、32位，后来AMD依此架构修改新一代的CPU为64位， 为了区别两者的差异，因此64位的个人电脑CPU又被统称为x86_64的架构喔！

*Tips: 所谓的位指的是CPU一次数据读取的最大量！64位CPU代表CPU一次可以读写64bits这么多的数据，32位CPU则是CPU一次只能读取32位的意思。 因为CPU读取数据量有限制，因此能够从内存中读写的数据也就有所限制。所以，一般32位的CPU所能读写的最大数据量，大概就是4GB左右。*

### 0.1.3 其他单元设备

只有CPU电脑是无法运行的，主机的其他硬件大多是通过**主板（main board）**连接在一起的，主板能够使用自己的芯片组将其他设备连接起来，好让CPU可以对这些设备下达命令。其他重要的设备有：

- 系统单元：系统单元包括 CPU 与内存及主板相关元件。而主板上头其实还有很多的连接接口与相关的适配卡。
- 存储单元：包括内存 （main memory, RAM） 与辅助内存，包括硬盘、软盘、光盘、磁带等等的。
- 输入、输出单元：输入设备包括前面提到的键盘鼠标，至于输出设备方面，除了屏幕外，打印机、音效喇叭、HDMI电视、投影机、蓝牙耳机等等，都算。

### 0.1.4 运行流程

如果把电脑比作人的话，那么

- CPU = 大脑
- 内存 = 脑袋中放置正在思考的数据的地方
- 硬盘 = 存放记忆的地方
- 主板 = 神经系统
- 各项周边设备 = 人体与外界沟通的手、脚、皮肤、眼睛等
- 显卡 = 处理图像的部分
- 电源供应器（Power） = 心脏

如果要由过去的经验来判断事情时， 也要将经验（硬盘）挪到目前的记忆（内存）当中，再交由CPU来判断喔！

### 0.1.5 电脑按用途分类

- **超级计算机（Supercomputer）**：大型计算机通常也具有数个高速的CPU，功能上虽不及超级计算机，但也可用来处理大量数据与复杂的运算。 例如大型企业的主机、全国性的证券交易所等每天需要处理数百万笔数据的企业机构， 或者是大型企业的数据库服务器等等。
- **大型计算机（Mainframe Computer）**：大型计算机通常也具有数个高速的CPU，功能上虽不及超级计算机，但也可用来处理大量数据与复杂的运算。 例如大型企业的主机、全国性的证券交易所等每天需要处理数百万笔数据的企业机构， 或者是大型企业的数据库服务器等等。
- **迷你电脑（Minicomputer）**：迷你电脑仍保有大型计算机同时支持多使用者的特性，但是主机可以放在一般作业场所， 不必像前两个大型计算机需要特殊的空调场所。通常用来作为科学研究、工程分析与工厂的流程管理等。
- **工作站（Workstation）**：工作站的价格又比迷你电脑便宜许多，是针对特殊用途而设计的电脑。在个人电脑的性能还没有提升到目前的状况之前， 工作站电脑的性能/价格比是所有电脑当中较佳的，因此在学术研究与工程分析方面相当常见。
- **微电脑（Microcomputer）**：个人电脑就属于这部份的电脑分类，也是我们本章主要探讨的目标！体积最小，价格最低，但功能还是五脏俱全的！ 大致又可分为桌上型、笔记型等等。

### 0.1.6 电脑上面常用的计算单位（容量、速度等）

#### 容量单位

二进制 bit  
1 Byte = 8 bits  
其余不同单位之间的进制是1024

| 进位制|Kilo |Mega|Giga|Tera|Peta|Exa|Zetta|
|-------|-----|---|----|----|-----|---|----|
|二进制 | 1024|1024K|1024M|1024G|1024T|1024P|1024E|
|十进制|1000|1000K|1000M|1000G|1000T|1000P|1000E|

#### 速度单位

PU的运算速度常使用 MHz 或者是 GHz 之类的单位，这个 Hz 其实就是秒分之一。而在网络传输方面，由于网络使用的是 bit 为单位，因此网络常使用的单位为 Mbps 是 Mbits per second，亦即是每秒多少 Mbit。举例来说，大家常听到的 20M/5M 光世代传输速度，如果转成文件大小的 Byte 时，其实理论最大传输值为：每秒 2.5MByte/ 每秒625KByte的下载/上传速度！

## 0.2 个人电脑架构与相关设备元件

早期的芯片组通常分为两个桥接器来控制各元件的沟通， 分别是：  
（1）北桥：负责链接速度较快的CPU、内存与显卡接口等元件；  
（2）南桥：负责连接速度较慢的设备接口， 包括硬盘、USB、网卡等等。  
不过由于北桥最重要的就是 CPU 与内存之间的桥接，因此目前的主流架构中， 大多将北桥内存控制器整合到 CPU 封装当中了。

### 0.2.1 执行脑袋运算与判断的CPU

原本的单核心CPU仅有一个运算单元，所谓的多核心则是在一颗CPU封装当中嵌入了两个以上的运算核心， 简单的说，就是一个实体的CPU外壳中，含有两个以上的CPU单元就是了。

不同的CPU型号大多具有不同的脚位（CPU上面的插脚），能够搭配的主板芯片组也不同， 主机升级时，不能只考虑CPU，还得要留意主板上面所支持的CPU型号。

频率就是CPU每秒钟可以进行的工作次数。

**CPU的工作频率：外频与倍频**：所谓的外频指的是CPU与外部元件进行数据传输时的速度，倍频则是 CPU 内部用来加速工作性能的一个倍数， 两者相乘才是CPU的频率速度。

CPU每次能够处理的数据量称为字组大小（word size）， 字组大小依据CPU的设计而有32位与64位。我们现在所称的电脑是32或64位主要是依据这个 CPU解析的字组大小而来的。

 CPU 内的内存控制芯片与内存间的传输速度“前端总线速度（Front Side Bus, FSB）

**CPU等级**：由于x86架构的CPU在Intel的Pentium系列（1993年）后就有不统一的脚位与设计，为了将不同种类的CPU规范等级， 所以就有i386,i586,i686等名词出现了。基本上，在Intel Pentium MMX与AMD K6年代的CPU称为i586等级， 而Intel Celeron与AMD Athlon（K7）年代之后的32位CPU就称为i686等级。 至于目前的64位CPU则统称为x86_64等级。 安装软件时，这些东西具有向下相容的能力啦！

**超线程 （Hyper-Threading, HT）**：通过此技术，英特尔实现在一个实体CPU中，提供两个逻辑线程。

### 0.2.2 内存

个人电脑的内存主要元件为动态随机存取内存（Dynamic Random Access Memory, DRAM）， 随机存取内存只有在通电时才能记录与使用，断电后数据就消失了。因此也称这种RAM为挥发性内存。

DRAM根据技术的更新又分好几代，而使用上较广泛的有所谓的SDRAM与DDR SDRAM两种。 这两种内存的差别除了在于脚位与工作电压上的不同之外，DDR是所谓的双倍数据传送速度（Double Data Rate）， 他可以在一次工作周期中进行两次数据的传送，感觉上就好像是CPU的倍频啦！ 所以传输频率方面比SDRAM还要好。

多通道设计：要启用双通道的功能你必须要安插两支（或四支）内存，这两支内存最好连型号都一模一样比较好， 这是因为启动双通道内存功能时，数据是同步写入/读出这一对内存中，如此才能够提升整体的带宽啊！ 所以当然除了容量大小要一致之外，型号也最好相同。

DRAM与SRAM：因为第二层高速缓存（L2 cache）整合到CPU内部，因此这个L2内存的速度必须要CPU频率相同。 使用DRAM是无法达到这个频率速度的，此时就需要静态随机存取内存（Static Random Access Memory, SRAM）的帮忙了。 SRAM在设计上使用的电晶体数量较多，价格较高，且不易做成大容量，不过由于其速度快， 因此整合到CPU内成为高速缓存内存以加快数据的存取是个不错的方式。

只读存储器（ROM）：BIOS（Basic Input Output System）是一套程序，这套程序是写死到主板上面的一个内存芯片中， 这个内存芯片在没有通电时也能够将数据记录下来，那就是只读存储器（Read Only Memory, ROM）

### 0.2.3 显卡

显卡又称为VGA（Video Graphics Array），他对于图形影像的显示扮演相当关键的角色。 一般对于图形影像的显示重点在于分辨率与色彩深度，因为每个图像显示的颜色会占用掉内存， 因此显卡上面会有一个内存的容量，这个显存容量将会影响到你的屏幕分辨率与色彩深度的！

显卡与显示器的主要连接格式有：

- D-Sub：为较早之前的连接接口，主要为 15 针的连接，为模拟讯号的传输。
- DVI：共有四种以上的接头，比较常见的为仅提供数码讯号的 DVI-D，以及整合数码与模拟讯号的 DVI-I 两种。
- HDMI：可以同时传送影像与声音。
- Display port：可以同时传送影像与声音。

### 0.2.4 硬盘与存储设备

硬盘的物理组成：硬盘依据台式机与笔记本电脑而有分为3.5英寸及2.5英寸的大小。我们以3.5英寸的台式机使用硬盘来说明。 在硬盘盒里面其实是由许许多多的圆形盘片、机械手臂、 磁头与主轴马达所组成的。

实际的数据都是写在具有磁性物质的盘片上头，而读写主要是通过在机械手臂上的磁头（head）来达成。 实际运行时， 主轴马达让盘片转动，然后机械手臂可伸展让磁头在盘片上头进行读写的动作。 另外，由于单一盘片的容量有限，因此有的硬盘内部会有两个以上的盘片！

由于盘片是圆的，并且通过机器手臂去读写数据，盘片要转动才能够让机器手臂读写。因此，通常数据写入当然就是以圆圈转圈的方式读写啰！ 所以，当初设计就是在类似盘片同心圆上面切出一个一个的小区块，这些小区块整合成一个圆形，让机器手臂上的磁头去存取。 这个小区块就是磁盘的最小物理储存单位，称之为扇区 （sector），那同一个同心圆的扇区组合成的圆就是所谓的磁道（track）。 由于磁盘里面可能会有多个盘片，因此在所有盘片上面的同一个磁道可以组合成所谓的柱面 （cylinder）。

#### 传输接口

- SATA接口
- SAS接口
- USB接口

#### 固态硬盘

传统硬盘有个很致命的问题，就是需要驱动马达去转动盘片～这会造成很严重的磁盘读取延迟！想想看，你得要知道数据在哪个扇区上面，然后再命令马达开始转， 之后再让磁头去读取正确的数据。另外，如果数据放置的比较离散（扇区分佈比较广又不连续），那么读写的速度就会延迟更明显！速度快不起来。因此， 后来就有厂商拿闪存去制作成大容量的设备，这些设备的连接接口也是通过 SATA 或 SAS，而且外型还做的跟传统磁盘一样！所以， 虽然这类的设备已经不能称为是磁盘 （因为没有磁头与盘片啊！都是内存！）。但是为了方便大家称呼，所以还是称为磁盘！只是跟传统磁盘 （Hard Disk Drive, HDD） 不同， 就称为固态硬盘 （Solid State Disk 或 Solid State Driver, SSD）。

#### 选购与运行须知

- HDD 或 SSD：预算够的话就SSD，不够的话就HDD加SSD。SSD做系统盘。
- 容量
- 缓冲内存
- 转速

## 0.3 数据表示方式

### 0.3.1 数字系统

早期的电脑使用的是利用通电与否的特性的真空管，如果通电就是1，没有通电就是0， 后来沿用至今，我们称这种只有0/1的环境为二进制制。

### 0.3.2 文字编码系统

常用的英文编码为ASCII系统，共有2^8= 256个。

最早中文的编码系统常用big5，理论上最多有2^16=65536个汉字，但有很多中文未收录，容易造成乱码问题。后来由国际组织ISO/IEC跳出来制订了所谓的Unicode编码系统， 我们常常称呼的UTF8或万国码的编码就是这个。

## 0.4 软件程序运行

软件分为两大类，一个是系统软件，一个是应用软件。

### 0.4.1 机器程序与编译程序

我们前面谈到电脑只认识0与1而已，而且电脑最重要的运算与逻辑判断是在CPU内部， 而CPU其实是具有微指令集的。因此，我们需要CPU帮忙工作时，就得要参考微指令集的内容， 然后撰写让CPU读的懂的指令码给CPU执行，这样就能够让CPU运行了。

不过这样的流程有几个很麻烦的地方，包括：

- 需要了解机器语言：机器只认识0与1，因此你必须要学习直接写给机器看的语言！ 这个地方相当的难呢！
- 需要了解所有硬件的相关功能函数：因为你的程序必须要写给机器看， 当然你就得要参考机器本身的功能，然后针对该功能去撰写程序码。例如，你要让DVD影片能够放映， 那就得要参考DVD光驱的硬件信息才行。万一你的系统有比较冷门的硬件，光是参考技术手册可能会昏倒～
- 程序不具有可携性：每个CPU都有独特的微指令集，同样的，每个硬件都有其功能函数。 因此，你为A电脑写的程序，理论上是没有办法在B电脑上面运行的！而且程序码的修改非常困难！ 因为是机器码，并不是人类看的懂得程序语言啊！
- 程序具有专一性：因为这样的程序必须要针对硬件功能函数来撰写， 如果已经开发了一支浏览器程序，想要再开发文件管理程序时，还是得从头再参考硬件的功能函数来继续撰写， 每天都在和“硬件”挑战！可能需要天天喝蛮牛了！

为了要克服硬件方面老是需要重复撰写控制码的问题，所以就有操作系统（Operating System, OS）的出现了

### 0.4.2 操作系统

#### 操作系统的核心（Kernel）

操作系统（Operating System, OS）其实也是一组程序，这组程序的重点在于管理电脑的所有活动以及驱动系统中的所有硬件。

#### 系统调用（System Call）

- 操作系统的核心层直接参考硬件规格写成， 所以同一个操作系统程序不能够在不一样的硬件架构下运行。
- 操作系统只是在管理整个硬件资源，包括CPU、内存、输入输出设备及文件系统文件。 如果没有其他的应用程序辅助，操作系统只能让电脑主机准备妥当（Ready）而已！
- 应用程序的开发都是参考操作系统提供的开发接口， 所以该应用程序只能在该操作系统上面运行而已，不可以在其他操作系统上面运行的。

#### 核心功能

核心至少也要有这些功能的：

- 系统调用接口（System call interface）：刚刚谈过了，这是为了方便程序开发者可以轻易的通过与核心的沟通，将硬件的资源进一步的利用， 于是需要有这个简易的接口来方便程序开发者。

- 程序管理（Process control）：总有听过所谓的“多任务环境”吧？一部电脑可能同时间有很多的工作跑到CPU等待运算处理， 核心这个时候必须要能够控制这些工作，让CPU的资源作有效的分配才行！另外， 良好的CPU调度机制（就是CPU先运行那个工作的排列顺序）将会有效的加快整体系统性能呢！

- 内存管理（Memory management）：
控制整个系统的内存管理，这个内存控制是非常重要的，因为系统所有的程序码与数据都必须要先存放在内存当中。 通常核心会提供虚拟内存的功能，当内存不足时可以提供内存交换（swap）的功能哩。

- 文件系统管理（Filesystem management）
文件系统的管理，例如数据的输入输出（I/O）等等的工作啦！还有不同文件格式的支持啦等等， 如果你的核心不认识某个文件系统，那么您将无法使用该文件格式的文件啰！例如：Windows 98就不认识NTFS文件格式的硬盘；

- 设备的驱动（Device drivers）
就如同上面提到的，硬件的管理是核心的主要工作之一，当然啰，设备的驱动程序就是核心需要做的事情啦！ 好在目前都有所谓的“可载入模块”功能，可以将驱动程序编辑成模块，就不需要重新的编译核心啦！

#### 操作系统与驱动程序

- 操作系统必须要能够驱动硬件，如此应用程序才能够使用该硬件功能；
- 一般来说，操作系统会提供开发接口，让开发商制作他们的驱动程序；
- 要使用新硬件功能，必须要安装厂商提供的驱动程序才行；
- 驱动程序是由厂商提供的，与操作系统开发者无关。

### 0.4.3 应用程序

应用程序是参考操作系统提供的开发接口所开发出来软件，这些软件可以让使用者操作，以达到某些电脑的功能利用。 举例来说，办公室软件（Office）主要是用来让使用者办公用的；影像处理软件主要是让使用者用来处理影音数据的； 浏览器软件主要是让使用者用来上网浏览用的等等。

## 0.5 重点回顾

- 计算机的定义为：“接受使用者输入指令与数据，经由中央处理器的数学与逻辑单元运算处理后，以产生或储存成有用的信息”；
- 电脑的五大单元包括：输入单元、输出单元、控制单元、算数逻辑单元、存储单元五大部分。其中CPU占有控制、算术逻辑单元，存储单元又包含内存与辅助内存；
- 数据会流进/流出内存是CPU所发布的控制命令，而CPU实际要处理的数据则完全来自于内存；
- CPU依设计理念主要分为：精简指令集（RISC）与复杂指令集（CISC）系统；
- 关于CPU的频率部分：外频指的是CPU与外部元件进行数据传输时的速度，倍频则是CPU内部用来加速工作性能的一个倍数， 两者相乘才是CPU的频率速度；
- 新的 CPU 设计中，已经将北桥的内存控制芯片整合到 CPU 内，而 CPU 与内存、显卡沟通的总线通常称为系统总线。 南桥就是所谓的输入输出（I/O）总线，主要在联系硬盘、USB、网卡等周边设备；
- CPU每次能够处理的数据量称为字组大小（word size），字组大小依据CPU的设计而有32位与64位。 我们现在所称的电脑是32或64位主要是依据这个 CPU解析的字组大小而来的！
- 个人电脑的内存主要元件为动态随机存取内存（Dynamic Random Access Memory, DRAM）， 至于CPU内部的第二层高速缓存则使用静态随机存取内存（Static Random Access Memory, SRAM）；
- BIOS（Basic Input Output System）是一套程序，这套程序是写死到主板上面的一个内存芯片中， 这个内存芯片在没有通电时也能够将数据记录下来，那就是只读存储器（Read Only Memory, ROM）；
- 目前主流的外接卡接口大多为 PCIe 接口，且最新为 PCIe 3.0，单信道速度高达 1GBytes/s
- 常见的显卡连接到屏幕的接口有 HDMI/DVI/D-Sub/Display port 等等。HDMI 可同时传送影像与声音。
- 传统硬盘的组成为：圆形盘片、机械手臂、 磁头与主轴马达所组成的，其中盘片的组成为扇区、磁道与柱面；
- 磁盘连接到主板的接口大多为 SATA 或 SAS，目前台式机主流为 SATA 3.0，理论极速可达 600MBytes/s。
- 常见的文字编码为 ASCII，繁体中文编码主要有 Big5 及 UTF8 两种，目前主流为 UTF8
- 操作系统（Operating System, OS）其实也是一组程序， 这组程序的重点在于管理电脑的所有活动以及驱动系统中的所有硬件。
- 电脑主要以二进制作为单位，常用的磁盘容量单位为Bytes，其单位换算为1 Byte = 8bits。
- 最阳春的操作系统仅在驱动与管理硬件，而要使用硬件时，就得需要通过应用软件或者是壳程序（shell）的功能， 来调用操作系统操纵硬件工作。目前称为操作系统的，除了上述功能外，通常已经包含了日常工作所需要的应用软件在内了。
