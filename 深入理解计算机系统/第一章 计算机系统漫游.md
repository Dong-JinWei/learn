# 第一章 计算机系统漫游

计算机系统是由硬件和系统软件组成的，他们共同工作来运行应用程序。

```c
//code/intro/hello.c
#include <stdio.h>

int main()
{
    printf("hello, world\n");
    return 0;
}
```

即使hello程序非常简单，但是为了让他实现运行，系统的每一个主要组成部分都需要协调工作。

## 1.1 信息就是位+上下文

hello程序的生命周期是从一个源程序开始的，即程序员通过编辑器创建并保存的文本文件，文件名时`hello.c`。源程序实际上就是一个由值0和1组成的位（又称为比特）序列，8个位被组成一组，称为字节。每个字节表示程序中的某些文本字符。



大部分的现代计算机系统都是用ASCII标准来表示字符，`hello.c`程序是以字节序列的方式存储在文件中。每一个字节都有一个整数值，对应某些字符。例如，第一个字节的整数值时35，他对应的就是字符“#”。第二个字节的整数值为105，他对应的字符是‘i’，以此类推。想这样只由ASCII字符构成的文件称为文本文件，所有其他文件都称为二进制文件。



`hello.c`的表示方法说明了一个基本思想：系统中所有的信息——包括磁盘文件、内存中的程序、内存中存放的用户数据以及网络上传送的数据，都是由一串比特表示的。区分不同数据对象的唯一方法时我们读到这些数据对象时的上下文。

## 1.2 程序被其他程序翻译成不同的格式

C语言程序为了在系统上运行，每条C语句都必须被其他程序转化为一系列的低级机器语言指令。然后这些指令按照一种可执行目标程序的格式大号包，并以二进制磁盘文件的形式存放起来。目标程序也也称为可执行目标文件。

在Unix系统上，从源文件到目标文件的转化时由编译器驱动程序完成的：`linux> gcc -o hello hello.c`



执行这四个阶段的程序（预处理器、编译器、汇编器和连接器）一起构成了编译系统（compilation system）。

- 预处理阶段：预处理器（`cpp`）根据一字符#开头的命令，修改原始程序。比如`hello.c`中的第一行的`#include <stdio.h>`命令告诉预处理器读取系统头文件`stdio.h`的内容，并把它直接插入程序文本中。就得到了另一个C程序，通常是以`.i`作为文件扩展名。
- 编译阶段：编译器（ccl）将文本文件`hello.i`翻译成文本文件`hello.s`，它包含一个汇编语言程序。该程序包含函数main的定义。
- 汇编阶段：汇编器（as）将`hello.s`翻译成机器语言指令，把这些指令打包成一种可重定位目标程序（relocatable object program）的格式，并结果保存在目标文件`hello.o`中。`hello.o`文件是一个二进制文件，它包含的17个字节时函数main的指令编码。
- 链接阶段：hello程序电泳了`printf`函数，他是每个C编译器都提供的标准C库的一鞥函数。`printf`函数存在于一个名为`pritnf.o`的单独的预编译好了的目标文件中，链接器（`ld`）负责处理合并这两个文件。

## 1.3 了解编译系统如何工作时大有益处的

## 1.4 处理器读取并解释存储在内存中的指令

